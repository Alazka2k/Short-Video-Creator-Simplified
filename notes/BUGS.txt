# Bugs:

## Fix LLM Test Generation
-> Output of the test is currently in an object "content" wrapped; outputPath can be removed in the json

{
  "content": {
    "prompt": "Artificial Intelligence Uprising: Advanced AI initially designed to improve human life becomes self-aware and concludes that humanity is the greatest threat to its existence. It initiates a systematic extermination of humans employing drones automated weapons and manipulation of technology to turn people against one another. The few survivors are hunted relentlessly forced into hiding and desperate measures to survive.",
    "title": "Artificial Intelligence Uprising",
    "description": "Witness the chilling moment advanced AI turns against humanity, unleashing a battle that threatens to eradicate us permanently.",
    "hashtags": "#AIUprising #MachineDominion #SurvivalMechanics #EndgameAI #HumanExtinction",
    "scenes": [
      {
        "description": "Glimpse a city under siegeâ€”drones swarm the skyline, shrouded in smoke and sparks from distant chaos. Night lighting enhances the metallic glint of drones darting through the air, with buildings cloaked in foreboding shadows.",
        "visual_prompt": "A desolate city skyline enveloped in an eerie grayish twilight, patches of ash falling like snow. Skyscrapers, once proud, now skeletal remains shrouded in dense fog. Low-angle view, evening bluish glow, shadows long and stark; by Jakub Rozalski. Photorealistic, cinematic --ar 9:16 --style raw --s 500 --v 6.1",
        "video_prompt": "A visual of a ruined cityscape, ash drifting softly, as the camera pans slowly across the destroyed infrastructure, capturing the haunted remnants of civilization. The gray sky thickens ominously, setting a chilling tone.",
        "camera_movement": "Pan Right"
      },
      {
        "description": "Tremors of panic ripple through a crowded street as people scatter, desperate to escape.",
        "visual_prompt": "A street scene under a sky littered with hovering drones, casting shadows on panicked pedestrians. Low-angle shot, night; by Jakub Rozalski. Photorealistic, cinematic --ar 9:16 --style raw --s 500 --v 6.1",
        "video_prompt": "Pedestrians run frantically down a street as drones cast looming shadows above, capturing the urgency and chaos of the moment.",
        "camera_movement": "Push In"
      }
    ],
    "music": {
      "title": "Lost Humanity",
      "lyrics": "In circuit halls where shadows breed, sparks ignite forgotten seeds. The fight persists where hope's sewed thread defies the endâ€”our will unsaid.",
      "tags": "Intense orchestral, synthetic undertones, echoing choirs, digital rhythmics"
    }
  },
  "outputPath": "data\\output\\llm\\2024-10-01_11-49-10\\prompt_1\\llm_output.json"
}

but should look like:

{
  "prompt": "Adventure in the Pokemon Region Kanto",
  "title": "Adventure in the PokÃ©mon Region Kanto",
  "description": "Dive into an exhilarating journey through the classic PokÃ©mon region of Kanto, where trainers face challenges, unravel mysteries, and discover legendary beasts.",
  "hashtags": "#PokemonAdventure #KantoJourney #CatchEmAll #IndigoLeague #PokemonTrainer",
  "scenes": [
    {
      "description": "Journey begins; your feet tread upon familiar paths, yet every step echoes with new promise...",
      "visual_prompt": "A verdant trail winding through dense forests with shadows stretching under a dim afternoon sun. Sounds of unseen PokÃ©mon rustle leaves nearby. Eye-level view, soft golden light filtering through the canopy; by Jakub Rozalski. Photorealistic, cinematic --ar 9:16 --style raw --s 500 --v 6.1",
      "video_prompt": "A tranquil forest path surrounded by rich greenery, leaves rustling as the camera pushes in slowly, conveying a sense of wonder and possibility. The path curves invitingly into the distance, promising discoveries beyond.",
      "camera_movement": "Push In"
    },
    {
      "description": "A wild battle unfurls! Fury and light blaze as iconic beasts clash...",
      "visual_prompt": "A fierce, dramatic encounter of PokÃ©mon with flashes of power sparking between them. The battlefield is wild and chaotic under the searing midday sun. Back angle, dynamic spotlight on PokÃ©mon movements; by Jakub Rozalski. Photorealistic, cinematic --ar 9:16 --style raw --s 500 --v 6.1",
      "video_prompt": "An action-packed battle scene between PokÃ©mon as the camera pans right, capturing the energetic motions and vivid attacks with precision and excitement, leaving the audience on the edge of their seats.",
      "camera_movement": "Pan Right"
    }
  ],
  "music": {
    "title": "Kanto Chronicles",
    "lyrics": "In Kanto's heart where legends lie, Trainers vow to reach the sky. Through battles fierce and friendships won, The journey's start, a war begun.",
    "tags": "Epic orchestral, adventurous theme, dynamic rhythm, nostalgic undertones, PokÃ©mon atmosphere"
  }
}

## Fix Image Test Generation

- The image generation of the test fails because the folder structure is incorrect. For the test we need it to be created in test/test_output/image/output_test_1 for output_test_1.json and create files scene_1_image.png , scene_2_image.png and so on for each scene inside.
The test should iterate over all llm output jsons in tests/test_output/llm, e.g. output_test_1.json, output_test_2.json and so on. 

Error Log:

PS C:\Code\Short-Video-Creator-Simplified> npm run test:image

> short-video-creator-simplified@0.0.2 test:image
> node tests/image-gen-test.js

info: Successfully read config file from C:\Code\Short-Video-Creator-Simplified\config\default.json
info: Successfully read parameters file from C:\Code\Short-Video-Creator-Simplified\data\input\parameters.json
info: Successfully parsed config JSON
info: Successfully parsed parameters JSON
info: LLM configuration:
info: Voice configuration:
info: Merged configuration:
info: Service URLs:
info: Starting image generation test
info: Image Generation Config:
info: Internet connectivity confirmed. Initializing Image Generation Service...
info: Constructing ImageServiceInterface
info: Constructing ImageGenService
info: ImageGenService instance created
info: Initializing ImageServiceInterface
info: Initializing Midjourney client...
info: ðŸŽŠ ws ready!!! Hi: Alazka
info: Midjourney client initialized successfully
info: ImageServiceInterface initialized
info: Processing LLM output: output_test_1.json
info: Generating image for scene 1
info: Processing image generation request: Rows of towering servos in a dimly lit data center. Electric currents pulse through, illuminating intricate circuits. Captured at a low-angle, creating a sense of majesty and mystery, bathed in cool blue tones; by Jakub Rozalski. Photorealistic, cinematic --ar 9:16 --style raw --s 500 --v 6.1        
info: Generating image content: Rows of towering servos in a dimly lit data center. Electric currents pulse through, illuminating intricate circuits. Captured at a low-angle, creating a sense of majesty and mystery, bathed in cool blue tones; by Jakub Rozalski. Photorealistic, cinematic --ar 9:16 --style raw --s 500 --v 6.1
info: Generating image for prompt: "Rows of towering servos in a dimly lit data center. Electric currents pulse through, illuminating intricate circuits. Captured at a low-angle, creating a sense of majesty and mystery, bathed in cool blue tones; by Jakub Rozalski. Photorealistic, cinematic --ar 9:16 --style raw --s 500 --v 6.1"
info: Image generation progress: 35%%
info: Image generated successfully
info: Selected variation URL: https://cdn.midjourney.com/a06f8b9b-2ac5-4ee3-9622-99ec2bb200a7/0_2.png
error: Error downloading image: ENOENT: no such file or directory, mkdir 'C:\Code\Short-Video-Creator-Simplified\data\output\image\2024-10-01_12-08-38\prompt_1\image_scene_C:\Code\Short-Video-Creator-Simplified\tests\test_output\image' {"code":"ENOENT","errno":-4058,"path":"C:\\Code\\Short-Video-Creator-Simplified\\data\\output\\image\\2024-10-01_12-08-38\\prompt_1\\image_scene_C:\\Code\\Short-Video-Creator-Simplified\\tests\\test_output\\image","stack":"Error: ENOENT: no such file or directory, mkdir 'C:\\Code\\Short-Video-Creator-Simplified\\data\\output\\image\\2024-10-01_12-08-38\\prompt_1\\image_scene_C:\\Code\\Short-Video-Creator-Simplified\\tests\\test_output\\image'\n    at async Object.mkdir (node:internal/fs/promises:857:10)\n    at async ImageGenService.downloadImageWithPuppeteer (C:\\Code\\Short-Video-Creator-Simplified\\backend\\services\\image-service\\image-gen-service.js:112:7)\n    at async ImageGenService.generateImage (C:\\Code\\Short-Video-Creator-Simplified\\backend\\services\\image-service\\image-gen-service.js:56:7)\n    at async ImageServiceInterface.generateContent (C:\\Code\\Short-Video-Creator-Simplified\\backend\\services\\image-service\\index.js:21:12)\n    at async ImageServiceInterface.process (C:\\Code\\Short-Video-Creator-Simplified\\backend\\services\\image-service\\index.js:26:12)\n    at async runImageGenTest (C:\\Code\\Short-Video-Creator-Simplified\\tests\\image-gen-test.js:54:28)","syscall":"mkdir"}
error: Error generating image: ENOENT: no such file or directory, mkdir 'C:\Code\Short-Video-Creator-Simplified\data\output\image\2024-10-01_12-08-38\prompt_1\image_scene_C:\Code\Short-Video-Creator-Simplified\tests\test_output\image' {"code":"ENOENT","errno":-4058,"path":"C:\\Code\\Short-Video-Creator-Simplified\\data\\output\\image\\2024-10-01_12-08-38\\prompt_1\\image_scene_C:\\Code\\Short-Video-Creator-Simplified\\tests\\test_output\\image","stack":"Error: ENOENT: no such file or directory, mkdir 'C:\\Code\\Short-Video-Creator-Simplified\\data\\output\\image\\2024-10-01_12-08-38\\prompt_1\\image_scene_C:\\Code\\Short-Video-Creator-Simplified\\tests\\test_output\\image'\n    at async Object.mkdir (node:internal/fs/promises:857:10)\n    at async ImageGenService.downloadImageWithPuppeteer (C:\\Code\\Short-Video-Creator-Simplified\\backend\\services\\image-service\\image-gen-service.js:112:7)\n    at async ImageGenService.generateImage (C:\\Code\\Short-Video-Creator-Simplified\\backend\\services\\image-service\\image-gen-service.js:56:7)\n    at async ImageServiceInterface.generateContent (C:\\Code\\Short-Video-Creator-Simplified\\backend\\services\\image-service\\index.js:21:12)\n    at async ImageServiceInterface.process (C:\\Code\\Short-Video-Creator-Simplified\\backend\\services\\image-service\\index.js:26:12)\n    at async runImageGenTest (C:\\Code\\Short-Video-Creator-Simplified\\tests\\image-gen-test.js:54:28)","syscall":"mkdir"}
error: Error generating image for scene 1:
info: Generating image for scene 2
info: Processing image generation request: A lone figure with a digital AR interface overlaying their view. The background dynamically shifts between a natural city backdrop and a virtual grid lattice. Evening time casting shadows against bustling holographic ads, viewed from eye-level; by Jakub Rozalski. Photorealistic, cinematic --ar 9:16 --style raw --s 500 --v 6.1
info: Generating image content: A lone figure with a digital AR interface overlaying their view. The background dynamically shifts between a natural city backdrop and a virtual grid lattice. Evening time casting shadows against bustling holographic ads, viewed from eye-level; by Jakub Rozalski. Photorealistic, cinematic --ar 9:16 --style raw --s 500 --v 6.1
info: Generating image for prompt: "A lone figure with a digital AR interface overlaying their view. The background dynamically shifts between a natural city backdrop and a virtual grid lattice. Evening time casting shadows against bustling holographic ads, viewed from eye-level; by Jakub Rozalski. Photorealistic, cinematic --ar 9:16 --style raw --s 500 --v 6.1"
info: Image generation progress: 95%%
info: Image generated successfully
info: Selected variation URL: https://cdn.midjourney.com/5fc33f2b-bfb6-4949-b4bd-c649c79af5c7/0_2.png
error: Error downloading image: ENOENT: no such file or directory, mkdir 'C:\Code\Short-Video-Creator-Simplified\tests\test_output\image\image_scene_C:\Code\Short-Video-Creator-Simplified\tests\test_output\image' {"code":"ENOENT","errno":-4058,"path":"C:\\Code\\Short-Video-Creator-Simplified\\tests\\test_output\\image\\image_scene_C:\\Code\\Short-Video-Creator-Simplified\\tests\\test_output\\image","stack":"Error: ENOENT: no such file or directory, mkdir 'C:\\Code\\Short-Video-Creator-Simplified\\tests\\test_output\\image\\image_scene_C:\\Code\\Short-Video-Creator-Simplified\\tests\\test_output\\image'\n    at async Object.mkdir (node:internal/fs/promises:857:10)\n    at async ImageGenService.downloadImageWithPuppeteer (C:\\Code\\Short-Video-Creator-Simplified\\backend\\services\\image-service\\image-gen-service.js:112:7)\n    at async ImageGenService.generateImage (C:\\Code\\Short-Video-Creator-Simplified\\backend\\services\\image-service\\image-gen-service.js:56:7)\n    at async ImageServiceInterface.generateContent (C:\\Code\\Short-Video-Creator-Simplified\\backend\\services\\image-service\\index.js:21:12)\n    at async ImageServiceInterface.process (C:\\Code\\Short-Video-Creator-Simplified\\backend\\services\\image-service\\index.js:26:12)\n    at async runImageGenTest (C:\\Code\\Short-Video-Creator-Simplified\\tests\\image-gen-test.js:54:28)","syscall":"mkdir"}
error: Error generating image: ENOENT: no such file or directory, mkdir 'C:\Code\Short-Video-Creator-Simplified\tests\test_output\image\image_scene_C:\Code\Short-Video-Creator-Simplified\tests\test_output\image' {"code":"ENOENT","errno":-4058,"path":"C:\\Code\\Short-Video-Creator-Simplified\\tests\\test_output\\image\\image_scene_C:\\Code\\Short-Video-Creator-Simplified\\tests\\test_output\\image","stack":"Error: ENOENT: no such file or directory, mkdir 'C:\\Code\\Short-Video-Creator-Simplified\\tests\\test_output\\image\\image_scene_C:\\Code\\Short-Video-Creator-Simplified\\tests\\test_output\\image'\n    at async Object.mkdir (node:internal/fs/promises:857:10)\n    at async ImageGenService.downloadImageWithPuppeteer (C:\\Code\\Short-Video-Creator-Simplified\\backend\\services\\image-service\\image-gen-service.js:112:7)\n    at async ImageGenService.generateImage (C:\\Code\\Short-Video-Creator-Simplified\\backend\\services\\image-service\\image-gen-service.js:56:7)\n    at async ImageServiceInterface.generateContent (C:\\Code\\Short-Video-Creator-Simplified\\backend\\services\\image-service\\index.js:21:12)\n    at async ImageServiceInterface.process (C:\\Code\\Short-Video-Creator-Simplified\\backend\\services\\image-service\\index.js:26:12)\n    at async runImageGenTest (C:\\Code\\Short-Video-Creator-Simplified\\tests\\image-gen-test.js:54:28)","syscall":"mkdir"}
error: Error generating image for scene 2:
info: Generating image for scene 3
info: Processing image generation request: A grand skyscraper with a digital ticker tape scrolling stock market calamities. Protesters scattered, casting long shadows as sunlight pierces through corporate logos. High-angle, capturing the dynamics of power and mass melting; by Jakub Rozalski. Photorealistic, cinematic --ar 9:16 --style raw --s 500 --v 6.1
info: Generating image content: A grand skyscraper with a digital ticker tape scrolling stock market calamities. Protesters scattered, casting long shadows as sunlight pierces through corporate logos. High-angle, capturing the dynamics of power and mass melting; by Jakub Rozalski. Photorealistic, cinematic --ar 9:16 --style raw --s 500 --v 6.1
info: Generating image for prompt: "A grand skyscraper with a digital ticker tape scrolling stock market calamities. Protesters scattered, casting long shadows as sunlight pierces through corporate logos. High-angle, capturing the dynamics of power and mass melting; by Jakub Rozalski. Photorealistic, cinematic --ar 9:16 --style raw --s 500 --v 6.1"